/* CSS đặc thù cho trang Lịch làm việc tài xế (Calendar) */
body,html {height:100%;}
:root{
--ink:#0f172a; --muted:#475569; --border:#e2e8f0; --card:#ffffff;
--own:#4338ca; --own-2:rgba(67,56,202,.15);
--blue:#3b82f6; --green:#059669; --gray:#94a3b8; --red:#ef4444; --violet:#667eea;
}
/* Match driver / vehicle pages spacing */
.main-content {flex:1; padding:2rem; display:flex; flex-direction:column; min-height:100vh;}
/* Header unified with driver.html (padding, alignment) */
.header {background:rgba(255,255,255,.95); backdrop-filter:blur(10px); border-radius:15px; padding:1.5rem 2.0rem; margin-bottom:1.2rem; box-shadow:0 5px 15px rgba(0,0,0,.1); display:flex; justify-content:space-between; align-items:flex-start;}
.toolbar {background:rgba(255,255,255,.95); backdrop-filter:blur(10px); border-radius:15px; padding:.8rem 1.0rem; margin-bottom:1.0rem; box-shadow:0 4px 12px rgba(0,0,0,.08); display:flex; gap:.9rem; align-items:center; flex-wrap:wrap;}
.calendar-title {font-size:.85rem; font-weight:600; color:#1e293b; padding:.45rem .75rem; background:#ffffff; border:1px solid #cbd5e1; border-radius:8px; box-shadow:0 2px 4px rgba(0,0,0,.04);}
.calendar-shell {background:rgba(255,255,255,.96); backdrop-filter:blur(8px); border-radius:18px; padding:.8rem .9rem 1.0rem; box-shadow:0 8px 28px -10px rgba(0,0,0,.18); flex:1; display:flex; flex-direction:column;}
#calendar {flex:1; min-height:600px;}
.btn, .nav-btn {background:#ffffff; border:1px solid #cbd5e1; color:#374151; padding:.5rem .9rem; border-radius:8px; font-size:.75rem; font-weight:600; cursor:pointer; display:inline-flex; align-items:center; gap:.45rem; transition:.2s;}
.btn.primary {background:linear-gradient(135deg,#667eea,#764ba2); color:#fff; border-color:#667eea;}
.btn:hover, .nav-btn:hover {background:#f1f5f9;}
.nav-btn-group {display:flex; gap:.45rem; align-items:center;}
.select-inline {display:flex; flex-direction:column;}
.select-inline label {font-size:.65rem; font-weight:600; color:#475569; letter-spacing:.5px; margin-bottom:.25rem; text-transform:uppercase;}
.select-inline select {height:38px; padding:.45rem .65rem; border:1.5px solid #764ba2; border-radius:8px; font-size:.8rem; background:#fff; min-width:180px;}
.fc .fc-toolbar-title {font-size:1.1rem; font-weight:600; color:#1e293b;}
.fc-col-header-cell-cushion {padding:.5rem .4rem; font-weight:700;}
/* Generic event look */
.fc-daygrid-event, .fc-timegrid-event {border-radius:10px; border:1px solid transparent; padding:6px 10px; font-size:.8rem; font-weight:700; line-height:1.25; position:relative; white-space:normal;}
.fc-daygrid-event:hover, .fc-timegrid-event:hover {filter:brightness(1.08); cursor: pointer;}    
.fc-event {border-left:5px solid transparent;}
.fc-event.evt-own {box-shadow:0 0 0 2px var(--own), 0 0 0 6px var(--own-2), 0 6px 16px -4px rgba(67,56,202,.40); border-color:var(--own); background-image:linear-gradient(135deg,#6366f1,#4338ca) !important; color:#fff;}
.fc-event.evt-own .evt-badge {background:#fff; color:var(--own);}
.fc-event.evt-other {opacity:.95;}
.fc-event.evt-other:hover {opacity:1;}
.fc-event .evt-badge {display:inline-block; padding:4px 8px; border-radius:6px; font-size:.7rem; font-weight:800; letter-spacing:.5px; margin-right:8px; background:#0f172a; color:#fff; box-shadow:0 2px 6px -2px rgba(0,0,0,.35);}    
.fc-event .evt-title {display:inline; font-size:.85rem; font-weight:800;}
.fc-event .evt-meta {display:block; font-size:.7rem; font-weight:600; opacity:.95; margin-top:4px;}
/* Status themes */
.fc-event.evt-trip-NOT_STARTED {background:linear-gradient(135deg,#93c5fd,#3b82f6) !important; color:#0f172a; border-left-color:#3b82f6;}
.fc-event.evt-trip-IN_PROGRESS {background:linear-gradient(135deg,#34d399,#059669) !important; color:#064e3b; border-left-color:#059669;}
.fc-event.evt-trip-COMPLETED {background:linear-gradient(135deg,#cbd5e1,#94a3b8) !important; color:#1e293b; border-left-color:#64748b;}
.fc-event.evt-trip-CANCELLED {background:linear-gradient(135deg,#fca5a5,#ef4444) !important; color:#7f1d1d; text-decoration:line-through; border-left-color:#ef4444;}
.fc-event.evt-unassigned {background:linear-gradient(135deg,#667eea,#764ba2) !important; color:#fff; border-left-color:#6d28d9;}
.fc-event:hover {filter:brightness(1.06);}    
.trip-tooltip {position:absolute; z-index:9999; background:#fff; color:#1e293b; padding:12px 14px; border:1px solid #cbd5e1; border-radius:12px; font-size:.8rem; line-height:1.35; box-shadow:0 12px 30px -10px rgba(0,0,0,.35); pointer-events:none; width:260px;}
/* Status-specific badge colors (override own-badge rule by order) */
.fc-event.evt-trip-NOT_STARTED .evt-badge{background:#eaf4ff; color:#1d4ed8; border:1px solid #bfdbfe;}
.fc-event.evt-trip-IN_PROGRESS .evt-badge{background:#ecfdf5; color:#059669; border:1px solid #a7f3d0;}
.fc-event.evt-trip-COMPLETED .evt-badge{background:#f1f5f9; color:#334155; border:1px solid #cbd5e1;}
.fc-event.evt-trip-CANCELLED .evt-badge{background:#fef2f2; color:#dc2626; border:1px solid #fecaca;}
.fc-event.evt-unassigned .evt-badge{background:#eef2ff; color:#4f46e5; border:1px solid #c7d2fe;}
/* Month view tweaks */
.fc-daygrid-day-number{font-weight:800;}
.fc-daygrid-event {margin:2px 4px;}
/* Timegrid tweaks */
.fc-timegrid-slot-label-cushion{font-weight:700;}
/* List view modern */
.fc .fc-list{border-radius:12px; overflow:hidden; border:1px solid var(--border);}
.fc .fc-list table{font-size:.9rem;}
.fc .fc-list-day-cushion{font-weight:800; background:#f8fafc;}
.fc .fc-list-event:hover td{background:#f1f5f9;}
.fc .fc-list-event-title{font-weight:800;}
.legend-item span.label {font-weight:600;}
.fc-theme-standard .fc-scrollgrid {border-radius:12px; overflow:hidden; border:1px solid #e2e8f0;}
.legend {display:flex; gap:1rem; flex-wrap:wrap; margin-top:.4rem; font-size:.7rem;}
.legend-item {display:flex; align-items:center; gap:.4rem;}
.legend-dot {width:14px; height:14px; border-radius:50%;}
#notifyBox {position:fixed; top:15px; right:15px; z-index:2000; display:none; min-width:260px; padding:12px 18px; border-radius:8px; font-weight:500; font-size:14px; background:#323232; color:#fff; box-shadow:0 4px 18px rgba(0,0,0,.18);}    

/* Hide empty more-link if we purposely return empty content */
.fc-daygrid-more-link:empty { display:none; }

/* Modal for driver updating trip times/status */
.modal { position:fixed; inset:0; background:rgba(0,0,0,.25); display:flex; justify-content:center; align-items:flex-start; padding-top:8vh; z-index:3000; opacity:0; visibility:hidden; pointer-events:none; transition:opacity .28s ease, visibility .28s linear; }
.modal.active { opacity:1; visibility:visible; pointer-events:auto; }
.modal-content { background:#fff; border-radius:14px; padding:1.4rem 1.2rem 1.0rem; width:520px; max-width:92%; box-shadow:0 8px 32px rgba(0,0,0,.18); transition:transform .3s cubic-bezier(.16,.8,.3,1), opacity .25s ease; transform:translateY(18px) scale(.96); opacity:0; }
.modal.active .modal-content { transform:translateY(0) scale(1); opacity:1; }
.modal-content h3 { margin:0 0 .9rem; font-size:1.1rem; color:#764ba2; display:flex; align-items:center; gap:.55rem; }
.form-grid { display:grid; grid-template-columns:1fr 1fr; gap:.7rem; }
.form-grid label { font-size:.78rem; font-weight:600; color:#374151; letter-spacing:.4px; text-transform:uppercase; margin-bottom:.2rem; display:block; }
.form-grid input, .form-grid select, .form-grid textarea { padding:.55rem .7rem; border:1.5px solid #764ba2; border-radius:8px; font-size:.8rem; background:#f8f9fa; transition:.15s; width:100%; box-sizing:border-box; margin: 0; border: none; cursor: pointer;}
.modal-actions { display:flex; justify-content:flex-end; gap:.6rem; margin-top:.6rem; }
.btn { background:#fff; color:#374151; border:1px solid #cbd5e1; border-radius:8px; padding:.5rem .9rem; font-size:.72rem; font-weight:500; cursor:pointer; }
.btn.primary { background:linear-gradient(135deg,#667eea,#764ba2); color:#fff; border-color:#667eea; }

/* Modern select (đồng bộ với trip.html) */
.modern-select { position:relative; font-size:.8rem; }
.modern-select select { position:absolute; inset:0; width:100%; height:100%; opacity:0; pointer-events:none; }
.modern-select .ms-trigger { width:100%; height:38px; padding:.5rem .85rem; background:#fff; border:1.5px solid #764ba2; border-radius:10px; display:flex; align-items:center; justify-content:space-between; gap:.75rem; cursor:pointer; color:#374151; font-size:.8rem; font-weight:500; line-height:1; transition:border-color .25s, box-shadow .25s, background-color .25s, transform .25s; text-align:left; }
.modern-select .ms-trigger:hover { background:#ffffff; border-color:#667eea; box-shadow:0 6px 18px -8px rgba(102,126,234,.40), 0 0 0 2px #667eea26; }
.modern-select .ms-value { white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.modern-select .ms-caret { width:14px; height:14px; position:relative; display:flex; align-items:center; justify-content:center; }
.modern-select .ms-caret:before { content:""; width:8px; height:8px; border-right:2px solid #667eea; border-bottom:2px solid #667eea; transform:rotate(45deg) translateY(-1px); transition:transform .35s cubic-bezier(.68,-0.55,.27,1.55), border-color .3s; }
.modern-select.open .ms-caret:before { transform:rotate(225deg) translateY(1px); border-color:#764ba2; }
.modern-select .ms-dropdown { position:absolute; top:100%; left:0; right:0; background:#fff; border:1.5px solid #764ba2; border-radius:10px; padding:.4rem .35rem .5rem; margin-top:.35rem; box-shadow:0 20px 48px -14px rgba(102,126,234,.38),0 6px 18px -6px rgba(118,75,162,.28); list-style:none; max-height:240px; overflow:auto; opacity:0; transform:translateY(-6px) scale(.94); pointer-events:none; transition:opacity .26s ease, transform .32s cubic-bezier(.16,.8,.3,1); scrollbar-width:thin; z-index:5000; }
.modern-select.open .ms-dropdown { opacity:1; transform:translateY(0) scale(1); pointer-events:auto; }
.modern-select .ms-option { padding:.5rem .85rem; border-radius:8px; cursor:pointer; display:flex; align-items:center; gap:.5rem; font-size:.8rem; line-height:1.1rem; min-height:38px; color:#374151; transition:background .2s, color .2s; text-align:left; }
.modern-select .ms-option:hover { background:#eef2ff; color:#4338ca; }
.modern-select .ms-option.active { background:linear-gradient(135deg,#667eea,#764ba2); color:#fff; box-shadow:0 4px 12px -5px rgba(102,126,234,.55); }

/* Modern datetime look (purely visual, logic unchanged) */
.dt-modern { position:relative; display:flex; align-items:center; background:#fff; border:1.5px solid #764ba2; border-radius:10px; transition:border-color .25s, box-shadow .25s, transform .25s; box-shadow:0 2px 10px -6px rgba(0,0,0,.2); }
.dt-modern:hover { border-color:#667eea; box-shadow:0 8px 22px -12px rgba(102,126,234,.45); }
.dt-modern:focus-within { border-color:#4338ca; box-shadow:0 0 0 2px #818cf826, 0 10px 28px -14px rgba(67,56,202,.45); transform:translateY(-1px); }
.dt-modern input[type="datetime-local"] { background:transparent !important; border:0 !important; outline:none; height:38px; padding:.55rem .85rem; width:100%; font-size:.85rem; font-weight:600; color:#0f172a; letter-spacing:.2px; }
.dt-modern input[type="datetime-local"]::placeholder { color:#94a3b8; }
.dt-modern input[type="datetime-local"]::-webkit-calendar-picker-indicator { opacity:.8; transition:opacity .2s, transform .2s; cursor:pointer; }
.dt-modern:hover input[type="datetime-local"]::-webkit-calendar-picker-indicator,
.dt-modern:focus-within input[type="datetime-local"]::-webkit-calendar-picker-indicator { opacity:1; transform:scale(1.05); }
@keyframes dtGlowPulse { 0%{ box-shadow:0 0 0 0 rgba(102,126,234,.18);} 100%{ box-shadow:0 0 0 10px rgba(102,126,234,0);} }
.dt-modern:focus-within { animation:dtGlowPulse 1.4s ease-out; }
.dt-cal-btn{ height:38px; min-width:38px; padding:0 .6rem; border:0; border-left:1px solid #e2e8f0; background:linear-gradient(180deg,#ffffff,#f8fafc); color:#4338ca; border-top-right-radius:10px; border-bottom-right-radius:10px; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; transition:background .2s, transform .2s, color .2s; }
.dt-cal-btn:hover{ background:#eef2ff; color:#4f46e5; }
.dt-cal-btn:active{ transform:scale(.98); }
.dt-modern .flatpickr-input{ flex:1; }

/* Flatpickr calendar theming */
.flatpickr-calendar { border:1px solid #cbd5e1; box-shadow:0 16px 42px -18px rgba(67,56,202,.35), 0 8px 24px -12px rgba(0,0,0,.18); border-radius:12px; overflow:hidden; z-index:5200; }
.flatpickr-calendar.open { animation:fpFadeUp .18s ease-out; }
@keyframes fpFadeUp { from{ opacity:0; transform:translateY(6px) scale(.98); } to{ opacity:1; transform:translateY(0) scale(1); } }
.flatpickr-months .flatpickr-month { color:#4338ca; }
.flatpickr-day.today { border-color:#667eea; }
.flatpickr-day.selected, .flatpickr-day.startRange, .flatpickr-day.endRange { background:linear-gradient(135deg,#667eea,#764ba2); border-color:#667eea; color:#fff; box-shadow:0 4px 10px -6px rgba(102,126,234,.55); }
.flatpickr-time input, .flatpickr-time .flatpickr-time-separator, .flatpickr-time .flatpickr-am-pm { font-weight:700; }
/* Alt input looks like our input */
.dt-modern .flatpickr-input[readonly] { background:transparent; border:0; outline:0; height:38px; padding:.55rem .85rem; width:100%; font-size:.85rem; font-weight:600; color:#0f172a; }

/* Smooth enhanced styling for "Chuyến của tôi" button */
#btnMyTrips{
position:relative;
background:linear-gradient(135deg,#6366f1,#4338ca);
background-size:200% 200%;
color:#fff;
border:1px solid #4338ca;
box-shadow:0 4px 14px -4px rgba(67,56,202,.55);
transition:background-position .6s ease, box-shadow .35s ease, transform .35s ease;
overflow:hidden;
}
#btnMyTrips:hover{
background-position:100% 0;
box-shadow:0 6px 18px -6px rgba(67,56,202,.6);
transform:translateY(-2px);
}
#btnMyTrips:active{
transform:translateY(0);
box-shadow:0 3px 10px -2px rgba(67,56,202,.5);
}
#btnMyTrips:focus-visible{
outline:2px solid #818cf8;
outline-offset:3px;
}
#btnMyTrips::after{
content:""; position:absolute; inset:0; background:radial-gradient(circle at 30% 20%, rgba(255,255,255,.35), rgba(255,255,255,0) 60%);
opacity:.0; transition:opacity .6s ease;
pointer-events:none;
}
#btnMyTrips:hover::after{opacity:.55;}
@keyframes myTripsPulse {0%{box-shadow:0 4px 14px -4px rgba(67,56,202,.55);}50%{box-shadow:0 5px 16px -4px rgba(67,56,202,.65);}100%{box-shadow:0 4px 14px -4px rgba(67,56,202,.55);}}
#btnMyTrips{animation:myTripsPulse 4.8s ease-in-out infinite;}
