spring.application.name=route_service
server.port=${SERVER_PORT:8083}

# ==== MySQL Datasource ====
# Đã đổi tên biến về chuẩn chung SPRING_DATASOURCE_... để dễ config trong Docker Compose
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:mysql://localhost:3306/route_service_db?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:root}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:root}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ==== HikariCP (Tối ưu cho AWS Free Tier) ====
# Giảm xuống 5 để tiết kiệm RAM cho EC2 (7 services * 5 connections = 35 connections -> OK)
spring.datasource.hikari.maximum-pool-size=${DB_POOL_SIZE:5}
spring.datasource.hikari.minimum-idle=${DB_MIN_IDLE:1}
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=30000

# ==== JPA / Hibernate ====
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# Open-Session-In-View off
spring.jpa.open-in-view=false

# ==== Logging ====
logging.level.org.hibernate.SQL=${LOG_HIBERNATE_SQL:INFO}
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=${LOG_HIBERNATE_BIND:WARN}